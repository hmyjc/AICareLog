# å¥åº·æ¡£æ¡ˆåŠ©æ‰‹ - Taro å¤šç«¯ç‰ˆæœ¬

> åŸºäº Taro 4.0 + React 18 + TypeScript çš„å¤šç«¯åº”ç”¨ï¼Œæ”¯æŒ H5ã€å¾®ä¿¡å°ç¨‹åºã€React Native ç­‰å¹³å°ã€‚

## âœ¨ ç‰¹æ€§

- ğŸš€ **Taro 4.0**ï¼šæœ€æ–°çš„ Taro æ¡†æ¶ï¼Œæ€§èƒ½æ›´ä¼˜
- âš›ï¸ **React 18**ï¼šä½¿ç”¨ React Hooks å¼€å‘
- ğŸ’ª **TypeScript**ï¼šå®Œæ•´çš„ç±»å‹æ”¯æŒ
- ğŸ“± **å¤šç«¯æ”¯æŒ**ï¼šä¸€å¥—ä»£ç ç¼–è¯‘åˆ° H5ã€å¾®ä¿¡å°ç¨‹åºã€RN ç­‰å¤šä¸ªå¹³å°
- ğŸ¨ **Taro UI**ï¼šä¸°å¯Œçš„ UI ç»„ä»¶åº“
- ğŸ”¥ **Redux Toolkit**ï¼šç°ä»£åŒ–çš„çŠ¶æ€ç®¡ç†
- ğŸ“¦ **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¸…æ™°çš„é¡¹ç›®ç»“æ„

## ğŸ“¦ æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Taro 4.0 + React 18
- **è¯­è¨€**: TypeScript
- **çŠ¶æ€ç®¡ç†**: Redux Toolkit
- **æ ·å¼**: Sass/SCSS
- **UIç»„ä»¶**: Taro UI + è‡ªå®šä¹‰ç»„ä»¶
- **åŒ…ç®¡ç†**: pnpm

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 16
- pnpm >= 8

### å®‰è£…ä¾èµ–

```bash
cd frontend-taro
pnpm install
```

### å¼€å‘

```bash
# H5 å¼€å‘ï¼ˆæµè§ˆå™¨é¢„è§ˆï¼‰
pnpm dev:h5

# å¾®ä¿¡å°ç¨‹åºå¼€å‘
pnpm dev:weapp
# ç„¶åä½¿ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·æ‰“å¼€ dist ç›®å½•

# æ”¯ä»˜å®å°ç¨‹åº
pnpm dev:alipay

# å­—èŠ‚è·³åŠ¨å°ç¨‹åº
pnpm dev:tt

# QQå°ç¨‹åº
pnpm dev:qq

# React Native
pnpm dev:rn
```

### æ„å»º

```bash
# H5 æ„å»º
pnpm build:h5

# å¾®ä¿¡å°ç¨‹åºæ„å»º
pnpm build:weapp

# å…¶ä»–å¹³å°æ„å»º
pnpm build:alipay
pnpm build:tt
pnpm build:qq
pnpm build:rn
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
frontend-taro/
â”œâ”€â”€ config/                 # Taro é…ç½®
â”‚   â”œâ”€â”€ index.ts           # ä¸»é…ç½®
â”‚   â”œâ”€â”€ dev.ts             # å¼€å‘ç¯å¢ƒé…ç½®
â”‚   â””â”€â”€ prod.ts            # ç”Ÿäº§ç¯å¢ƒé…ç½®
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ pages/             # é¡µé¢
â”‚   â”‚   â”œâ”€â”€ profile/       # ç”¨æˆ·æ¡£æ¡ˆé¡µ
â”‚   â”‚   â”œâ”€â”€ persona/       # äººç‰©é£æ ¼é¡µ
â”‚   â”‚   â”œâ”€â”€ rest/          # ä½œæ¯æé†’é¡µ
â”‚   â”‚   â”œâ”€â”€ meal/          # é¥®é£Ÿæé†’é¡µ
â”‚   â”‚   â”œâ”€â”€ weather/       # å¤©æ°”æ¨é€é¡µ
â”‚   â”‚   â””â”€â”€ health-tip/    # å…»ç”Ÿå¦™æ‹›é¡µ
â”‚   â”œâ”€â”€ components/        # å…¬å…±ç»„ä»¶
â”‚   â”œâ”€â”€ store/             # Redux çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ userSlice.ts
â”‚   â”œâ”€â”€ services/          # API æœåŠ¡
â”‚   â”‚   â””â”€â”€ api.ts
â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ request.ts
â”‚   â”œâ”€â”€ types/             # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ assets/            # é™æ€èµ„æº
â”‚   â”œâ”€â”€ app.tsx            # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ app.config.ts      # åº”ç”¨é…ç½®ï¼ˆé¡µé¢è·¯ç”±ã€tabBarç­‰ï¼‰
â”‚   â””â”€â”€ app.scss           # å…¨å±€æ ·å¼
â”œâ”€â”€ project.config.json    # å¾®ä¿¡å°ç¨‹åºé…ç½®
â”œâ”€â”€ package.json
â””â”€â”€ tsconfig.json
```

## ğŸ”§ é…ç½®è¯´æ˜

### 1. ä¿®æ”¹ API åœ°å€

ç¼–è¾‘ `src/utils/request.ts`ï¼š

```typescript
const API_BASE_URL = process.env.TARO_APP_API_URL || 'http://39.104.28.40:8000/api'
```

æˆ–åœ¨ `config/index.ts` ä¸­é…ç½®ç¯å¢ƒå˜é‡ï¼š

```typescript
defineConstants: {
  TARO_APP_API_URL: JSON.stringify('https://your-api.com/api')
}
```

### 2. ä¿®æ”¹å°ç¨‹åº AppID

ç¼–è¾‘ `project.config.json`ï¼š

```json
{
  "appid": "your-appid-here"
}
```

### 3. æ·»åŠ æ–°é¡µé¢

1. åœ¨ `src/pages/` ä¸‹åˆ›å»ºé¡µé¢ç›®å½•ï¼ˆå¦‚ `my-page/`ï¼‰
2. åˆ›å»º `index.tsx`ã€`index.scss`ã€`index.config.ts`
3. åœ¨ `src/app.config.ts` ä¸­æ³¨å†Œé¡µé¢è·¯ç”±

```typescript
export default defineAppConfig({
  pages: [
    'pages/profile/index',
    'pages/my-page/index'  // æ–°å¢é¡µé¢
  ]
})
```

## ğŸ¯ åŠŸèƒ½æ¨¡å—

### 1. ç”¨æˆ·æ¡£æ¡ˆç®¡ç†
- åŸºç¡€ä¿¡æ¯å½•å…¥ï¼ˆæ˜µç§°ã€å¹´é¾„ã€æ€§åˆ«ã€èº«é«˜ã€ä½“é‡ã€è¡€å‹ï¼‰
- å¥åº·ä¿¡æ¯ç®¡ç†ï¼ˆç”Ÿæ´»ä¹ æƒ¯ã€è¿‡æ•å²ã€æ—¢å¾€ç—…å²ç­‰ï¼‰
- æ¡£æ¡ˆç¼–è¾‘ä¸æ›´æ–°

### 2. äººç‰©é£æ ¼é€‰æ‹©
- å¤šç§æ¨é€é£æ ¼ï¼ˆæ¸©æŸ”ç¾å¥³ã€äº²åˆ‡å¦ˆå¦ˆã€ä¸“ä¸šé¡¾é—®ç­‰ï¼‰
- é£æ ¼é¢„è§ˆä¸åˆ‡æ¢
- ä¸ªæ€§åŒ–æ¨é€ä½“éªŒ

### 3. ä½œæ¯æé†’
- æ—©æ™¨ã€ä¸­åˆã€å¤œæ™šä¸‰ä¸ªæ—¶é—´æ®µæé†’
- åŸºäºç”¨æˆ·ç”Ÿæ´»ä¹ æƒ¯çš„ä¸ªæ€§åŒ–å»ºè®®
- å†å²è®°å½•æŸ¥çœ‹

### 4. é¥®é£Ÿæé†’
- æ—©é¤ã€åˆé¤ã€æ™šé¤æé†’
- æ ¹æ®å¥åº·æ¡£æ¡ˆæ¨èé¥®é£Ÿ
- å¿Œå£æç¤º

### 5. å¤©æ°”æ¨é€
- å®æ—¶å¤©æ°”ä¿¡æ¯çˆ¬å–
- çœå¸‚åœ°åŒºé€‰æ‹©
- å¤©æ°”å¥åº·å»ºè®®

### 6. å…»ç”Ÿå¦™æ‹›
- æ¯æ—¥å…»ç”Ÿå»ºè®®
- åŸºäºå…¨é‡ç”¨æˆ·ä¿¡æ¯çš„ä¸ªæ€§åŒ–å†…å®¹
- å†å²è®°å½•

## ğŸ”„ å¤šç«¯å·®å¼‚å¤„ç†

### H5ç«¯
- æ”¯æŒæµè§ˆå™¨è°ƒè¯•
- ä½¿ç”¨æµè§ˆå™¨ localStorage
- å¼€å‘ä¾¿æ·ï¼Œé€‚åˆå¿«é€Ÿè¿­ä»£

### å¾®ä¿¡å°ç¨‹åº
- éœ€è¦é…ç½® AppID
- æ³¨æ„è¯·æ±‚åŸŸåç™½åå•
- ä½¿ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·è°ƒè¯•

### React Native
- éœ€è¦é…ç½®åŸç”Ÿç¯å¢ƒï¼ˆAndroid/iOSï¼‰
- æ€§èƒ½æ¥è¿‘åŸç”Ÿåº”ç”¨
- é€‚åˆå¯¹æ€§èƒ½è¦æ±‚é«˜çš„åœºæ™¯

## ğŸ“š å­¦ä¹ èµ„æº

- **ä» uni-app åˆ° Taro æŒ‡å—**: [UNI_TO_TARO_GUIDE.md](./UNI_TO_TARO_GUIDE.md)
- **Taro å®˜æ–¹æ–‡æ¡£**: https://taro-docs.jd.com/
- **React å®˜æ–¹æ–‡æ¡£**: https://react.dev/
- **Taro UI æ–‡æ¡£**: https://taro-ui.jd.com/

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **API æ¥å£**ï¼šç¡®ä¿åç«¯APIåœ°å€é…ç½®æ­£ç¡®
2. **å¾®ä¿¡å°ç¨‹åº**ï¼šéœ€è¦åœ¨ `project.config.json` ä¸­é…ç½® AppID
3. **H5è·¨åŸŸ**ï¼šå¼€å‘æ—¶å¯èƒ½éœ€è¦é…ç½®ä»£ç†è§£å†³è·¨åŸŸé—®é¢˜
4. **æ ·å¼å•ä½**ï¼šä½¿ç”¨ rpx è€Œé pxï¼Œç¡®ä¿å¤šç«¯é€‚é…
5. **ç»„ä»¶å¯¼å…¥**ï¼šç»„ä»¶å¿…é¡»ä» `@tarojs/components` å¯¼å…¥

## ğŸ› å¸¸è§é—®é¢˜

### Q1: å¾®ä¿¡å°ç¨‹åºç¼–è¯‘æŠ¥é”™ï¼Ÿ
A: æ£€æŸ¥æ˜¯å¦æ­£ç¡®å®‰è£…äº†ä¾èµ–ï¼Œç¡®ä¿ `project.config.json` é…ç½®æ­£ç¡®ã€‚

### Q2: H5 ç«¯è¯·æ±‚å¤±è´¥ï¼Ÿ
A: æ£€æŸ¥ API åœ°å€é…ç½®ï¼Œå¼€å‘ç¯å¢ƒå¯èƒ½éœ€è¦é…ç½® CORS æˆ–ä»£ç†ã€‚

### Q3: æ ·å¼ä¸ç”Ÿæ•ˆï¼Ÿ
A: ç¡®ä¿ä½¿ç”¨ rpx å•ä½ï¼Œæ£€æŸ¥æ˜¯å¦æ­£ç¡®å¯¼å…¥äº† scss æ–‡ä»¶ã€‚

### Q4: ç»„ä»¶æ‰¾ä¸åˆ°ï¼Ÿ
A: ç¡®ä¿ä» `@tarojs/components` å¯¼å…¥ï¼Œå¦‚ `import { View } from '@tarojs/components'`

## ğŸ“ å¼€å‘è§„èŒƒ

- ä½¿ç”¨ TypeScript ç¼–å†™ä»£ç 
- ç»„ä»¶å‘½åä½¿ç”¨ PascalCase
- æ–‡ä»¶å‘½åä½¿ç”¨ kebab-case
- ä½¿ç”¨ ESLint å’Œ Prettier ä¿æŒä»£ç é£æ ¼ä¸€è‡´
- æäº¤ä»£ç å‰ç¡®ä¿æ²¡æœ‰ lint é”™è¯¯

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ License

MIT

---

Made with â¤ï¸ by Health Agent Team

