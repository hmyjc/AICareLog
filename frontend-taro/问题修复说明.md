# Taro é¡¹ç›® Babel ç¼–è¯‘é”™è¯¯ä¿®å¤è¯´æ˜

## ğŸ› é—®é¢˜æè¿°

åœ¨æ„å»º Taro é¡¹ç›®æ—¶ï¼Œé‡åˆ° babel-loader è§£æ TypeScript æ–‡ä»¶æ—¶çš„è¯­æ³•é”™è¯¯ï¼š

```
ERROR in ./src/app.config.ts
Module build failed (from ./node_modules/babel-loader/lib/index.js):
SyntaxError: Unexpected token, expected "," (62:31)
```

é”™è¯¯å‡ºç°åœ¨ `app.config.ts` å’Œæ‰€æœ‰é¡µé¢çš„ `index.config.ts` æ–‡ä»¶ä¸­ã€‚

## ğŸ” é—®é¢˜æ ¹æº

**é”™è¯¯ä»£ç ï¼š**
```typescript
export default defineAppConfig({
  // é…ç½®å†…å®¹...
})

// âŒ é”™è¯¯ï¼šè‡ªå®šä¹‰äº† defineAppConfig å‡½æ•°
function defineAppConfig(config: any) {
  return config
}
```

**é—®é¢˜åˆ†æï¼š**
1. åœ¨ Taro é…ç½®æ–‡ä»¶ä¸­è‡ªå®šä¹‰äº† `defineAppConfig` å’Œ `definePageConfig` å‡½æ•°
2. è¿™äº›å‡½æ•°ä½¿ç”¨äº† TypeScript ç±»å‹æ³¨è§£ï¼ˆ`: any`ï¼‰
3. babel-loader åœ¨ç¼–è¯‘æ—¶æ— æ³•æ­£ç¡®è§£æè¿™äº›è‡ªå®šä¹‰å‡½æ•°çš„ TypeScript è¯­æ³•
4. Taro å®˜æ–¹æä¾›äº†è¿™äº›å‡½æ•°ï¼Œåº”è¯¥ä» `@tarojs/taro` å¯¼å…¥è€Œä¸æ˜¯è‡ªå·±å®šä¹‰

## âœ… è§£å†³æ–¹æ¡ˆ

### 1. ä¿®å¤ app.config.ts

**ä¿®æ”¹å‰ï¼ˆé”™è¯¯ï¼‰ï¼š**
```typescript
export default defineAppConfig({
  pages: [...]
})

function defineAppConfig(config: any) {
  return config
}
```

**å°è¯•æ–¹æ¡ˆ1ï¼ˆä»ç„¶æŠ¥é”™ï¼‰ï¼š**
```typescript
import { defineAppConfig } from '@tarojs/taro'

export default defineAppConfig({
  pages: [...]
})
```
âŒ é”™è¯¯ï¼š`defineAppConfig is not a function`

**æœ€ç»ˆæ­£ç¡®æ–¹æ¡ˆï¼š**
```typescript
// ç›´æ¥å¯¼å‡ºé…ç½®å¯¹è±¡ï¼Œä¸éœ€è¦ä»»ä½•åŒ…è£…å‡½æ•°
export default {
  pages: [...]
}
```
âœ… æˆåŠŸï¼

### 2. ä¿®å¤æ‰€æœ‰é¡µé¢é…ç½®æ–‡ä»¶

å¯¹ä»¥ä¸‹æ–‡ä»¶è¿›è¡Œäº†ç›¸åŒçš„ä¿®å¤ï¼š
- âœ… `src/pages/profile/index.config.ts`
- âœ… `src/pages/persona/index.config.ts`
- âœ… `src/pages/rest/index.config.ts`
- âœ… `src/pages/meal/index.config.ts`
- âœ… `src/pages/weather/index.config.ts`
- âœ… `src/pages/health-tip/index.config.ts`

**ä¿®æ”¹å‰ï¼ˆé”™è¯¯ï¼‰ï¼š**
```typescript
export default definePageConfig({
  navigationBarTitleText: 'é¡µé¢æ ‡é¢˜'
})

function definePageConfig(config: any) {
  return config
}
```

**æœ€ç»ˆæ­£ç¡®æ–¹æ¡ˆï¼š**
```typescript
// ç›´æ¥å¯¼å‡ºé…ç½®å¯¹è±¡
export default {
  navigationBarTitleText: 'é¡µé¢æ ‡é¢˜'
}
```

### 3. æ·»åŠ  Babel é…ç½®

åˆ›å»º `babel.config.js` æ–‡ä»¶ï¼š

```javascript
module.exports = {
  presets: [
    ['taro', {
      framework: 'react',
      ts: true
    }]
  ]
}
```

è¿™ç¡®ä¿äº† Taro é¡¹ç›®èƒ½å¤Ÿæ­£ç¡®å¤„ç† TypeScript å’Œ React è¯­æ³•ã€‚

## ğŸ“ ä¿®å¤çš„æ–‡ä»¶åˆ—è¡¨

1. âœ… `src/app.config.ts`
2. âœ… `src/pages/profile/index.config.ts`
3. âœ… `src/pages/persona/index.config.ts`
4. âœ… `src/pages/rest/index.config.ts`
5. âœ… `src/pages/meal/index.config.ts`
6. âœ… `src/pages/weather/index.config.ts`
7. âœ… `src/pages/health-tip/index.config.ts`
8. âœ… `babel.config.js` (æ–°å¢)
9. âœ… `.editorconfig` (æ–°å¢)

## ğŸš€ éªŒè¯ä¿®å¤

ä¿®å¤åï¼Œå¯ä»¥æ­£å¸¸è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# H5 å¼€å‘
pnpm dev:h5

# å¾®ä¿¡å°ç¨‹åºå¼€å‘
pnpm dev:weapp

# æ„å»º
pnpm build:h5
pnpm build:weapp
```

## ğŸ’¡ æœ€ä½³å®è·µ

### âœ… æ­£ç¡®åšæ³•

```typescript
// app.config.ts - ç›´æ¥å¯¼å‡ºé…ç½®å¯¹è±¡
export default {
  pages: [
    'pages/index/index'
  ],
  window: {
    navigationBarTitleText: 'åº”ç”¨æ ‡é¢˜'
  }
}
```

```typescript
// é¡µé¢é…ç½® index.config.ts - ç›´æ¥å¯¼å‡ºé…ç½®å¯¹è±¡
export default {
  navigationBarTitleText: 'é¡µé¢æ ‡é¢˜'
}
```

**è¯´æ˜**ï¼š
- âœ… Taro 4.0.6 ä¸­ï¼Œé…ç½®æ–‡ä»¶åº”è¯¥**ç›´æ¥å¯¼å‡ºå¯¹è±¡**
- âœ… ä¸éœ€è¦ä»»ä½•åŒ…è£…å‡½æ•°ï¼ˆå¦‚ `defineAppConfig`ã€`definePageConfig`ï¼‰
- âœ… è¿™äº› `define*` å‡½æ•°åœ¨æŸäº›ç‰ˆæœ¬ä¸­å¯èƒ½ç”¨äºç±»å‹æç¤ºï¼Œä½†åœ¨ç¼–è¯‘æ—¶ä¼šæŠ¥é”™

### âŒ é”™è¯¯åšæ³•

```typescript
// âŒ é”™è¯¯1ï¼šè‡ªå®šä¹‰åŒ…è£…å‡½æ•°
function defineAppConfig(config: any) {
  return config
}

export default defineAppConfig({
  // é…ç½®...
})
```

```typescript
// âŒ é”™è¯¯2ï¼šä» @tarojs/taro å¯¼å…¥ï¼ˆåœ¨ 4.0.6 ä¸­ä¸å¯ç”¨ï¼‰
import { defineAppConfig } from '@tarojs/taro'

export default defineAppConfig({
  // é…ç½®...
})
// æŠ¥é”™ï¼šdefineAppConfig is not a function
```

```typescript
// âœ… æ­£ç¡®ï¼šç›´æ¥å¯¼å‡ºå¯¹è±¡
export default {
  // é…ç½®...
}
```

## ğŸ”§ å…¶ä»–æ³¨æ„äº‹é¡¹

### 1. TypeScript æ”¯æŒ

Taro å®Œæ•´æ”¯æŒ TypeScriptï¼Œä½†é…ç½®æ–‡ä»¶éœ€è¦éµå¾ª Taro çš„è§„èŒƒï¼š
- ä» `@tarojs/taro` å¯¼å…¥ç±»å‹å®šä¹‰
- ä¸è¦åœ¨é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨å¤æ‚çš„ TypeScript è¯­æ³•
- é…ç½®å¯¹è±¡åº”è¯¥æ˜¯çº¯æ•°æ®

### 2. Babel é…ç½®

å¦‚æœéœ€è¦è‡ªå®šä¹‰ Babel é…ç½®ï¼Œåº”è¯¥ï¼š
- ç»§æ‰¿ `babel-preset-taro`
- ç¡®ä¿ `ts: true` å¯ç”¨ TypeScript æ”¯æŒ
- æŒ‡å®š `framework: 'react'`

### 3. ä¾èµ–ç‰ˆæœ¬

ç¡®ä¿ä½¿ç”¨å…¼å®¹çš„ç‰ˆæœ¬ï¼š
```json
{
  "@tarojs/cli": "4.0.6",
  "@tarojs/taro": "4.0.6",
  "@tarojs/components": "4.0.6",
  "@tarojs/plugin-framework-react": "4.0.6",
  "babel-preset-taro": "4.0.6"
}
```

## ğŸ“š å‚è€ƒèµ„æ–™

- [Taro å®˜æ–¹æ–‡æ¡£ - é…ç½®è¯¦æƒ…](https://taro-docs.jd.com/docs/config-detail)
- [Taro å®˜æ–¹æ–‡æ¡£ - TypeScript æ”¯æŒ](https://taro-docs.jd.com/docs/typescript)
- [babel-preset-taro æ–‡æ¡£](https://github.com/NervJS/taro/tree/next/packages/babel-preset-taro)

## âœ¨ æ€»ç»“

è¿™æ¬¡ä¿®å¤çš„æ ¸å¿ƒæ˜¯ï¼š
1. âœ… **ä½¿ç”¨å®˜æ–¹ API**ï¼šä» `@tarojs/taro` å¯¼å…¥ `defineAppConfig` å’Œ `definePageConfig`
2. âœ… **ç§»é™¤è‡ªå®šä¹‰å‡½æ•°**ï¼šåˆ é™¤æ‰€æœ‰è‡ªå®šä¹‰çš„ TypeScript è¾…åŠ©å‡½æ•°
3. âœ… **æ·»åŠ  Babel é…ç½®**ï¼šç¡®ä¿é¡¹ç›®èƒ½æ­£ç¡®ç¼–è¯‘ TypeScript

ä¿®å¤åï¼Œé¡¹ç›®å¯ä»¥æ­£å¸¸æ„å»ºå’Œè¿è¡Œäº†ï¼ğŸ‰

---

**ä¿®å¤æ—¶é—´**: 2025-01-03  
**ä¿®å¤ç‰ˆæœ¬**: Taro 4.0.6

